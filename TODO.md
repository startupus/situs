# TODO — План задач (Situs)

В этом файле — только будущие задачи. Статус и сделанное отражены в README.

## Ближайшие (1–2 недели)
- [ ] Исправить 404 по "GET /api/permissions/stream": либо реализовать SSE прав, либо убрать вызов во фронте и заменить на существующие REST "/api/ui/*".
- [ ] Устранить предупреждение Sidebar SSE при инициализации: добавить retry с backoff и структурированное логирование.

## Backend (NestJS)
- [ ] Invitations: покрыть e2e сценарии (создание инвайта → принятие → статусы), синхронизировать ответы с фронтом.
- [ ] Прод‑безопасность: CORS/Helmet/RateLimit из ENV, валидация через env.validation.ts и документация.
- [ ] Ограничить демо‑ручки feature‑флагом (только development).

## Frontend (React)
- [ ] Проекты: фильтры/пагинация (опции 100/200), унифицировать действия "Поиск/Добавить" с хедером.
- [ ] Меню: консолидация IconSelector и маппинга иконок, валидация выбора.
- [ ] Навигация: исключить дубли заголовков/крошек в контенте, опора на верхний хедер.

## Документация
- [ ] Поддерживать актуальный индекс в docs/README.md после архивирования документов.
- [ ] Описать запуск и управление pm2 (ecosystem.config.cjs) в корневом README.

## Инструменты/качество
- [ ] Активировать git hooks: "git config core.hooksPath .githooks" и описать в DEVELOPMENT.md.
- [ ] Добавить в CI: prettier --check и ESLint на PR; зафиксировать форматирование (Prettier/ESLint) в документации.

## Тестирование
- [ ] Playwright: сценарии Projects list и Menu Manager (создание/удаление, тумблеры, DnD), проверка консоли браузера.
- [ ] Vitest: edge‑кейсы ProjectsService, Domains, Menus (валидаторы, ошибки, пагинация, статусы).

## Деплой/операции
- [ ] Документировать быстрый dev‑запуск: nestjs:build + serve:api:dist (3002) и dev:situs (5177) с health‑проверкой.
