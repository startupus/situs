# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –µ–¥–∏–Ω–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

## üéØ –¶–µ–ª—å
–û–±–µ—Å–ø–µ—á–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ **–æ–¥–Ω–æ–π –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö** –≤–æ –≤—Å–µ–º –ø—Ä–æ–µ–∫—Ç–µ –∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
```
prisma/dev.db - –ï–î–ò–ù–°–¢–í–ï–ù–ù–ê–Ø –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞
```

### ‚ùå –ó–∞–ø—Ä–µ—â–µ–Ω–Ω—ã–µ –¥—É–±–ª–∏–∫–∞—Ç—ã
```
prisma/prisma/dev.db - –£–î–ê–õ–ï–ù–û
prisma/database.db - –ù–ï –°–û–ó–î–ê–í–ê–¢–¨
prisma/test.db - –ù–ï –°–û–ó–î–ê–í–ê–¢–¨
–ª—é–±—ã–µ –¥—Ä—É–≥–∏–µ *.db —Ñ–∞–π–ª—ã –≤ –ø—Ä–æ–µ–∫—Ç–µ - –ù–ï –°–û–ó–î–ê–í–ê–¢–¨
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### .env —Ñ–∞–π–ª
```bash
# –ï–î–ò–ù–°–¢–í–ï–ù–ù–´–ô –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
DATABASE_URL="file:/Users/dmitriy/Google –î–∏—Å–∫/–ü—Ä–æ–µ–∫—Ç—ã –∫—É—Ä—Å–æ—Ä/Situs/prisma/dev.db"
```

### Prisma Schema (prisma/schema.prisma)
```prisma
datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}
```

## üö´ –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤

### 1. Gitignore –ø—Ä–∞–≤–∏–ª–∞
–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ `.gitignore`:
```
# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö - —Ç–æ–ª—å–∫–æ dev.db —Ä–∞–∑—Ä–µ—à–µ–Ω–∞
prisma/*.db
!prisma/dev.db
prisma/prisma/
```

### 2. –ê–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **–∞–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å** –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ø—Ä–æ–±–ª–µ–º —Å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–º–∏ –ø—É—Ç—è–º–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∏–∑ —Ä–∞–∑–Ω—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π.

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
–°–∫—Ä–∏–ø—Ç—ã –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ .db —Ñ–∞–π–ª–æ–≤
db_count=$(find prisma/ -name "*.db" | wc -l)
if [ $db_count -gt 1 ]; then
  echo "‚ùå –û–®–ò–ë–ö–ê: –ù–∞–π–¥–µ–Ω–æ $db_count –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö. –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∞!"
  exit 1
fi
```

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –î–≤–æ–π–Ω–æ–π –ø—Ä–µ—Ñ–∏–∫—Å API
**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –∏–º–µ–ª–∏ `@Controller('api/menu-types')`, –Ω–æ –≤ `main.ts` —É–∂–µ –±—ã–ª –≥–ª–æ–±–∞–ª—å–Ω—ã–π –ø—Ä–µ—Ñ–∏–∫—Å `api`, —á—Ç–æ —Å–æ–∑–¥–∞–≤–∞–ª–æ `/api/api/menu-types`.

**–†–µ—à–µ–Ω–∏–µ:** –£–±—Ä–∞–Ω –ø—Ä–µ—Ñ–∏–∫—Å `api/` –∏–∑ –≤—Å–µ—Ö –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤:
```typescript
// ‚ùå –ë—ã–ª–æ
@Controller('api/menu-types')

// ‚úÖ –°—Ç–∞–ª–æ
@Controller('menu-types')
```

### 2. –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –ø—É—Ç–∏
**–ü—Ä–æ–±–ª–µ–º–∞:** `DATABASE_URL="file:./prisma/dev.db"` —Ä–∞–±–æ—Ç–∞–ª –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∏–∑ —Ä–∞–∑–Ω—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π.

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –∞–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å:
```bash
DATABASE_URL="file:/Users/dmitriy/Google –î–∏—Å–∫/–ü—Ä–æ–µ–∫—Ç—ã –∫—É—Ä—Å–æ—Ä/Situs/prisma/dev.db"
```

### 3. –î—É–±–ª–∏—Ä—É—é—â–∏–µ –±–∞–∑—ã
**–ü—Ä–æ–±–ª–µ–º–∞:** –°—É—â–µ—Å—Ç–≤–æ–≤–∞–ª–∏ –¥–≤–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:
- `./prisma/dev.db` (—Å—Ç–∞—Ä–∞—è, –ø—É—Å—Ç–∞—è)
- `./prisma/prisma/dev.db` (–Ω–æ–≤–∞—è, —Å –¥–∞–Ω–Ω—ã–º–∏)

**–†–µ—à–µ–Ω–∏–µ:** 
1. –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã –¥–∞–Ω–Ω—ã–µ –∏–∑ `./prisma/prisma/dev.db` –≤ `./prisma/dev.db`
2. –£–¥–∞–ª–µ–Ω–∞ –ø–∞–ø–∫–∞ `./prisma/prisma/`
3. –ù–∞—Å—Ç—Ä–æ–µ–Ω –µ–¥–∏–Ω—ã–π –ø—É—Ç—å –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

### –†–∞–±–æ—Ç–∞—é—â–∞—è —Å–∏—Å—Ç–µ–º–∞
- ‚úÖ **–ï–¥–∏–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** `prisma/dev.db`
- ‚úÖ **API —Ä–∞–±–æ—Ç–∞–µ—Ç:** `/api/menu-types`, `/api/menu-items`
- ‚úÖ **–ú–µ–Ω—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç:** –ü–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –º–µ–Ω—é —Å –∏–µ—Ä–∞—Ä—Ö–∏–µ–π
- ‚úÖ **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:** `@Scopes('PROJECT_READ')` –∞–∫—Ç–∏–≤–Ω—ã
- ‚úÖ **–î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã:** 10 –ø—Ä–æ–µ–∫—Ç–æ–≤, 12 —Ç–∏–ø–æ–≤ –º–µ–Ω—é, 78 –ø—É–Ω–∫—Ç–æ–≤ –º–µ–Ω—é

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö
```sql
SELECT COUNT(*) FROM projects;   -- 10 –ø—Ä–æ–µ–∫—Ç–æ–≤
SELECT COUNT(*) FROM menu_types; -- 12 —Ç–∏–ø–æ–≤ –º–µ–Ω—é  
SELECT COUNT(*) FROM menu_items; -- 78 –ø—É–Ω–∫—Ç–æ–≤ –º–µ–Ω—é
SELECT COUNT(*) FROM products;   -- 28 –ø—Ä–æ–¥—É–∫—Ç–æ–≤
SELECT COUNT(*) FROM pages;      -- 52 —Å—Ç—Ä–∞–Ω–∏—Ü—ã
```

## üõ°Ô∏è –ü—Ä–∞–≤–∏–ª–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

### ‚ùå –ù–ò–ö–û–ì–î–ê –ù–ï –î–ï–õ–ê–¢–¨:
1. –ù–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–µ `.db` —Ñ–∞–π–ª—ã
2. –ù–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø–∞–ø–∫–∏ —Ç–∏–ø–∞ `prisma/prisma/`
3. –ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –ø—É—Ç–∏ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
4. –ù–µ –¥–æ–±–∞–≤–ª—è—Ç—å –ø—Ä–µ—Ñ–∏–∫—Å `api/` –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã (—É–∂–µ –µ—Å—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–π)

### ‚úÖ –í–°–ï–ì–î–ê –î–ï–õ–ê–¢–¨:
1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ `prisma/dev.db`
2. –ü—Ä–æ–≤–µ—Ä—è—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º
3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–±—Å–æ–ª—é—Ç–Ω—ã–µ –ø—É—Ç–∏ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å API –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞—Ö

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```bash
# –î–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ñ–∞–π–ª
find prisma/ -name "*.db"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö
sqlite3 prisma/dev.db "SELECT COUNT(*) FROM projects;"
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ API
```bash
# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å –¥–∞–Ω–Ω—ã–µ –º–µ–Ω—é
curl -s "http://localhost:3002/api/menu-types?projectId=PROJECT_ID" | jq
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤
```bash
# –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –¥–≤–æ–π–Ω—ã—Ö –ø—Ä–µ—Ñ–∏–∫—Å–æ–≤
grep -r "@Controller('api/" src/server/
```

–ï—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞ –≤—ã—à–µ —á—Ç–æ-—Ç–æ –Ω–∞—Ö–æ–¥–∏—Ç - —ç—Ç–æ –æ—à–∏–±–∫–∞, –Ω—É–∂–Ω–æ —É–±—Ä–∞—Ç—å `api/` –ø—Ä–µ—Ñ–∏–∫—Å –∏–∑ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞.
