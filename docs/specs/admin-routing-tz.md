# ТЗ: Разделение публичного лендинга и административной панели (публичный лендинг в отдельном проекте)

## Цель
Административная часть остаётся в текущем проекте с существующими маршрутами. Публичный лендинг и публичный сайт переносятся в отдельный проект/репозиторий. Настоящий документ описывает только минимальные изменения для чистого разделения и интеграционных точек.

## Обоснование
- Чёткое разделение публичного/SEO и административной части
- Отдельные политики безопасности (CSP), robots, cookie scope для админки
- Удобная навигация: `/` — лендинг, `/admin` — рабочая зона

## Термины и зона ответственности
- «Админка» — текущий проект Situs (React + NestJS), маршруты и поведение остаются без префикса `/admin`.
- «Публичный лендинг» — отдельный проект (репозиторий), развёрнутый независимо; взаимодействует через публичные API/ссылки.

---

## Требования к маршрутам
- Админка остаётся на текущих путях (`/projects`, `/orders`, `/users`, ...).
- Публичный лендинг обслуживается внешним проектом на отдельном домене/субдомене.

## Объём работ
### 1) Frontend (React Router)
- Сохранить текущую схему маршрутов (без переноса под `/admin`).
- Удалить из этого документа задачи переноса путей.

### 2) Переадресации и деплой
- Публичный лендинг разворачивается отдельно; при необходимости — настроить Nginx/Reverse Proxy для маршрутизации доменов.

### 3) Авторизация / Cookies
- Политики авторизации админки без изменений. Публичный лендинг — отдельная auth‑зона.

### 4) Robots, мета и безопасность
- Публичный лендинг — свои правила; админка — как сейчас. Разделение политик выполняется по проектам.

### 5) Dev/Build конфигурация
- Без изменений для админки. Публичный лендинг — отдельный пайплайн.

### 6) UI/Навигация
- Без изменений. Проектный сайдбар и admin-sidebar уже реализованы.

### 7) Тестирование
- Проверки навигации админки и проектного сайдбара уже покрыты e2e в текущем проекте.

### 8) Миграция
- Публичный лендинг — отдельный репозиторий и пайплайн; интеграция через ссылки/SSO/API.

### 9) Откат (rollback)
- Вернуть точку входа админки на `/` и отключить редиректы 301

---

## Чек-лист (выполнить по пунктам)
- [x] Админка остаётся на текущих путях; перенос под `/admin` отменён.
- [ ] Выделить отдельный репозиторий/проект для публичного лендинга.
- [ ] Настроить деплой лендинга на отдельный домен/субдомен.
- [x] Определить интеграции (SSO/redirects) между лендингом и админкой: авторизация раздельная; уведомления/инвайты через EMAIL_SMTP интеграции; редиректы с лендинга ведут на `/projects` и `/auth` текущей админки.

---

## Критерии приёмки
- Корень `/` отдаёт публичный лендинг (или заглушку)
- Вся админка доступна по `/admin/*`, все старые адреса автоматически ведут на новые
- Авторизация и навигация админки работают полностью на префиксе `/admin`
- Robots запрещает индексацию `/admin`
- Не сломан SPA‑роутинг при обновлении страницы на глубоком `/admin/*`

## Риски
- Пропущенные абсолютные ссылки без префикса `/admin`
- Отсутствие серверных 301 может ухудшить UX при открытии старых ссылок из закладок
- Внешние интеграции/SSO: требуется обновить `redirect_uri`

## Дальнейшие шаги
- Рассмотреть перенос админки на субдомен (например, `admin.example.com`) для максимальной изоляции (этап 2)
