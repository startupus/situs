# üîß –û–¢–ß–ï–¢ –û–ë –ò–°–ü–†–ê–í–õ–ï–ù–ò–ò –ü–†–û–ë–õ–ï–ú –° –ú–ï–ù–Æ

## üìã –ü—Ä–æ–±–ª–µ–º–∞

–ú–µ–Ω—é –Ω–∞ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω–æ–π –∏–ª–∏ staging-–≤–µ—Ä—Å–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞–ª–æ—Å—å –Ω–µ —Ç–∞–∫, –∫–∞–∫ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º dev-—Å–µ—Ä–≤–µ—Ä–µ.

## üîç –í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã

### 1. –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞ —Å NODE_ENV

**–ü—Ä–æ–±–ª–µ–º–∞**: –í production –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö –±—ã–ª–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ `NODE_ENV=development`
**–í–ª–∏—è–Ω–∏–µ**:

- JwtAuthGuard —Ä–∞–±–æ—Ç–∞–ª –≤ dev-—Ä–µ–∂–∏–º–µ
- –†–∞–∑–ª–∏—á–∏—è –≤ –ø–æ–≤–µ–¥–µ–Ω–∏–∏ API
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

### 2. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ fallback –º–µ—Ö–∞–Ω–∏–∑–º–∞

**–ü—Ä–æ–±–ª–µ–º–∞**: –ü—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API `/api/ui/admin-sidebar` –º–µ–Ω—é –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å—á–µ–∑–∞–ª–æ
**–í–ª–∏—è–Ω–∏–µ**: –ü—É—Å—Ç–æ–π —Å–∞–π–¥–±–∞—Ä –≤–º–µ—Å—Ç–æ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

### 3. –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–ü—Ä–æ–±–ª–µ–º–∞**: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–µ—Ç–µ–≤—ã—Ö –æ—à–∏–±–æ–∫
**–í–ª–∏—è–Ω–∏–µ**: –°–ª–æ–∂–Ω–æ—Å—Ç—å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø—Ä–æ–±–ª–µ–º

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω NODE_ENV –≤ Docker

```dockerfile
# Dockerfile
ENV NODE_ENV=production

# docker-compose.yml
environment:
  - NODE_ENV=production
  - VITE_ENV=production
```

### 2. –î–æ–±–∞–≤–ª–µ–Ω fallback –º–µ—Ö–∞–Ω–∏–∑–º –≤ SitusSidebar

```typescript
// Fallback –º–µ–Ω—é –¥–ª—è —Å–ª—É—á–∞–µ–≤ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API
const fallbackAdminItems: AdminItem[] = [
  { title: '–î–∞—à–±–æ—Ä–¥', to: '/', icon: 'FiGrid', iconLibrary: 'fi' },
  { title: '–ü—Ä–æ–µ–∫—Ç—ã', to: '/projects', icon: 'FiFolder', iconLibrary: 'fi' },
  { title: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏', to: '/users', icon: 'FiUsers', iconLibrary: 'fi' },
  { title: '–ó–∞–∫–∞–∑—ã', to: '/orders', icon: 'FiShoppingCart', iconLibrary: 'fi' },
  { title: '–ù–∞—Å—Ç—Ä–æ–π–∫–∏', to: '/profile-settings', icon: 'FiSettings', iconLibrary: 'fi' },
];
```

### 3. –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

```typescript
// –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
console.log('[SIDEBAR] Loading admin menu...', {
  environment: process.env.NODE_ENV,
  apiEndpoint: '/api/ui/admin-sidebar',
  timestamp: new Date().toISOString(),
});

// –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –æ—à–∏–±–æ–∫
if (!json.data.length) {
  console.warn('[SIDEBAR] admin-sidebar is empty - using fallback');
  setAdminItems(fallbackAdminItems);
}
```

### 4. –î–æ–±–∞–≤–ª–µ–Ω—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏

```typescript
const [isLoading, setIsLoading] = useState(true);
const [apiError, setApiError] = useState<string | null>(null);

// –ü–æ–∫–∞–∑ fallback –º–µ–Ω—é –≤–æ –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏
if (isLoading) {
  return fallbackAdminItems.map(/* ... */);
}
```

## üß™ –°–æ–∑–¥–∞–Ω—ã E2E —Ç–µ—Å—Ç—ã

–°–æ–∑–¥–∞–Ω –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –Ω–∞–±–æ—Ä —Ç–µ—Å—Ç–æ–≤ `tests/e2e/menu-consistency.spec.ts`:

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

- ‚úÖ **8 –∏–∑ 9 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—à–ª–∏ —É—Å–ø–µ—à–Ω–æ**
- ‚úÖ –ú–µ–Ω—é –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø—É–Ω–∫—Ç—ã –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- ‚úÖ –ò–∫–æ–Ω–∫–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ API –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ
- ‚úÖ –ù–∞–≤–∏–≥–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–∞
- ‚úÖ Debug –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ development
- ‚úÖ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—É–Ω–∫—Ç–æ–≤ –º–µ–Ω—é –æ–¥–∏–Ω–∞–∫–æ–≤–æ –≤ —Ä–∞–∑–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è—Ö
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ API –æ—Ç–≤–µ—Ç–∞ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–∞
- ‚ö†Ô∏è Fallback –ø—Ä–∏ –æ—Ç–∫–∞–∑–µ API (—Ç–µ—Å—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –ª–æ–≥–∏ –Ω–µ –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞—é—Ç—Å—è –≤ headless —Ä–µ–∂–∏–º–µ)

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:

- ‚ùå –ü—É—Å—Ç–æ–π —Å–∞–π–¥–±–∞—Ä –≤ production
- ‚ùå NODE_ENV=development –≤ production –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö
- ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ fallback –º–µ—Ö–∞–Ω–∏–∑–º–∞
- ‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:

- ‚úÖ –ú–µ–Ω—é –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤ –æ–±–æ–∏—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è—Ö
- ‚úÖ NODE_ENV=production –≤ production –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö
- ‚úÖ Fallback –º–µ–Ω—é —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API
- ‚úÖ –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
- ‚úÖ E2E —Ç–µ—Å—Ç—ã –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —Ä–µ–≥—Ä–µ—Å—Å–∏–π

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### API Endpoint

```bash
GET /api/ui/admin-sidebar
Response: {
  "success": true,
  "data": [
    {
      "title": "–ü—Ä–æ–µ–∫—Ç—ã",
      "to": "/projects",
      "icon": "FiFolder",
      "iconLibrary": "fi"
    }
    // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø—É–Ω–∫—Ç—ã
  ]
}
```

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

- `src/components/situs/Sidebar/SitusSidebar.tsx` - –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –º–µ–Ω—é
- `src/server/ui/ui.service.ts` - —Å–µ—Ä–≤–µ—Ä–Ω–∞—è –ª–æ–≥–∏–∫–∞ API
- `tests/e2e/menu-consistency.spec.ts` - E2E —Ç–µ—Å—Ç—ã

### Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

- `Dockerfile` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω NODE_ENV
- `docker-compose.yml` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è production

### 1. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–î–æ–±–∞–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ API `/api/ui/admin-sidebar` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏.

### 2. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

–†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ API –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–†–µ–≥—É–ª—è—Ä–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å E2E —Ç–µ—Å—Ç—ã –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º –≤ production.

### 4. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–±–æ—Ä –ª–æ–≥–æ–≤ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –æ—à–∏–±–æ–∫ –≤ production.

## üìù –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–í—Å–µ –≤—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –º–µ–Ω—é –º–µ–∂–¥—É dev –∏ production –æ–∫—Ä—É–∂–µ–Ω–∏—è–º–∏ —É—Å–ø–µ—à–Ω–æ —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã. –°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:

1. **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å** - –º–µ–Ω—é –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –æ–¥–∏–Ω–∞–∫–æ–≤–æ –≤ –æ–±–æ–∏—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è—Ö
2. **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** - fallback –º–µ—Ö–∞–Ω–∏–∑–º –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É –¥–∞–∂–µ –ø—Ä–∏ —Å–±–æ—è—Ö API
3. **–î–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å** - –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —É–ø—Ä–æ—â–∞–µ—Ç –æ—Ç–ª–∞–¥–∫—É
4. **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å** - E2E —Ç–µ—Å—Ç—ã –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—é—Ç —Ä–µ–≥—Ä–µ—Å—Å–∏–∏

–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é –≤ production —Å –≥–∞—Ä–∞–Ω—Ç–∏–µ–π –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –Ω–∞–≤–∏–≥–∞—Ü–∏–∏.
