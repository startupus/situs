# Общие правила

Назначение: единые требования к стилю, именованию, зависимостям и документации кода.

## Ссылки в проекте

- `eslint.config.js` — правила линтинга
- `docs/DEVELOPMENT_STANDARDS.md` — процессы разработки
- `src/components/admin/menu/README.md` — пример README модуля

## Форматирование и стиль

- Отступ — 2 пробела, конец строки — LF, кодировка — UTF-8.
- Всегда использовать `===`/`!==`.
- Не использовать `var`. Предпочитать `const`, затем `let`.
- Точки с запятой обязательны. Максимальная длина строки — 120 символов.
- Линтинг: `npm run lint` / `npm run lint:fix` (см. `eslint.config.js`).

## Именование

- Классы/типы/enum — `PascalCase` (`UsersService`, `MenuItemParams`).
- Функции/переменные/пропсы — `camelCase` (`fetchMenuItems`, `isActive`).
- Константы — `UPPER_SNAKE_CASE` (`DEFAULT_PAGE_SIZE`).
- Файлы React‑компонентов — `PascalCase.tsx`. Хуки — `use*.ts`.
- DTO интерфейсы — `PascalCase` с суффиксом `Dto` (`CreateUserDto`).

## Импорты и алиасы

- Порядок импортов: node/stdlib → внешние пакеты → алиасы → относительные.
- Использовать алиасы из `tsconfig*.json` (`@/*`, `redaktus/*`, `website/*`).
- Исключить циклические зависимости. Предпочитать публичные точки входа (`index.ts`).

Пример порядка импортов:

```ts
import fs from 'node:fs';
import path from 'node:path';

import express from 'express';
import { z } from 'zod';

import { apiClient } from '@/api/client';
import { buildMenuLookup } from '@/lib/menu/lookup';

import { localHelper } from './utils';
import type { LocalOptions } from './types';
```

## Документация кода

- Экспортируемые сущности документировать через TSDoc: назначение, параметры, возврат, ошибки.
- Папки с логикой сопровождать `README.md` с кратким описанием.
- Бэкенд API описывать декораторами Swagger (`@ApiTags`, `@ApiProperty`).

Шаблон README для папки модуля:

```md
# <Название модуля>

## Назначение

Короткое описание задачи и границ модуля.

## Публичные точки входа

- `index.ts` — экспортируемые сущности

## Структура

- `entities/` — доменные сущности
- `dto/` — DTO для входа/выхода
- `*.service.ts` — бизнес‑логика
- `*.controller.ts` — HTTP слой (если backend)

## Зависимости

- Внешние пакеты: ...
- Внутренние модули: ...

## Примеры использования

Короткие сниппеты или ссылки на тесты.
```

## Ошибки и логирование

- Бэкенд: использовать исключения NestJS (`BadRequestException`, `NotFoundException`, ...).
- Логирование централизованным логгером. `console.log` в коммитах запрещён (линтер).
- Фронтенд: ошибки пользователя — через единый UI‑канал (тосты/алерты), сетевые — с деградацией.

## Лицензии и зависимости

- Перед добавлением пакета проверять лицензию; избегать несовместимых.
- Фиксировать версии; периодически обновлять.

## Коммиты и PR

- Сообщения по Conventional Commits: `feat:`, `fix:`, `docs:`, `refactor:`, `test:`, `chore:`.
- PR — небольшие, с понятным описанием «что/почему/как проверено». Связывать с задачами/доками.

## Do / Don't

- Do: явные имена переменных/функций, узкие интерфейсы, изоляция модулей.
- Do: тестировать критические ветки и edge‑cases.
- Don't: хардкодить строки UI, кидать «сырые» ошибки, допускать циклические зависимости.

## Навигация

Назад: `./README.md`
