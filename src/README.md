# Situs Service — Архитектура исходного кода

## 🏗️ Общая архитектура

**Situs Service** — это платформа для создания сайтов при помощи ИИ с интуитивным редактором Редактус. Архитектура построена по модульному принципу с четким разделением ответственности.

## 📁 Структура модулей

```
src/
├── ai/                    # 🧠 ИИ-генератор сайтов (ОСНОВНАЯ ЦЕННОСТЬ)
│   ├── generator/         # Основная логика генерации
│   ├── prompts/          # Промпты для ИИ
│   └── templates/        # Шаблоны сайтов
├── editor/               # ✏️ Редактор Редактус
│   ├── core/            # Основной движок редактора
│   ├── canvas/          # Холст для редактирования
│   ├── toolbar/         # Панель инструментов
│   └── panels/          # Боковые панели
├── components/           # 🧩 Компонентная библиотека
│   ├── library/         # Основная библиотека
│   ├── categories/      # Категории компонентов
│   └── custom/          # Пользовательские компоненты
├── generator/            # 📄 Генератор JSON
│   ├── json/            # JSON схемы
│   ├── static/          # Статическая генерация
│   └── export/          # Экспорт сайтов
├── platform/             # 🔗 Интеграции с платформой
│   ├── hubus/           # Интеграция с Hubus
│   ├── loginus/         # Интеграция с Loginus
│   └── bilingus/        # Интеграция с Bilingus
├── domains/              # 🌐 Управление доменами
│   ├── management/      # Управление доменами
│   ├── dns/             # DNS интеграция
│   └── ssl/             # SSL сертификаты
├── i18n/                 # 🌍 Мультиязычность
│   ├── locales/         # Локализации
│   ├── translation/     # Система переводов
│   └── rtl/             # Поддержка RTL
└── ui/                   # 🎨 Пользовательский интерфейс
    ├── common/          # Общие компоненты
    ├── layout/          # Макеты
    └── forms/           # Формы
```

## 🎯 Принципы архитектуры

### 1. **Модульность**
Каждый модуль является независимой единицей с четко определенными границами и интерфейсами.

### 2. **Масштабируемость**
Архитектура позволяет легко добавлять новые модули и расширять существующие.

### 3. **Изоляция**
Модули слабо связаны между собой, что обеспечивает стабильность и тестируемость.

## 🔧 Стандарты разработки

### Структура файлов
```
module/
├── README.md           # Документация модуля
├── TODO.md            # План разработки
├── index.ts           # Основной экспорт
├── types.ts           # Типы модуля
├── constants.ts       # Константы
└── utils.ts           # Утилиты
```

### Соглашения по именованию
- **Файлы**: camelCase для утилит, PascalCase для компонентов
- **Папки**: kebab-case для модулей, camelCase для подпапок
- **Экспорты**: именованные экспорты, избегать default export

### Импорты
```typescript
// Правильно: относительные импорты внутри модуля
import { Component } from './components/Component';

// Правильно: абсолютные импорты между модулями
import { SiteGenerator } from '@/ai/generator/SiteGenerator';
```

## 🔗 Взаимодействие модулей

### Основной поток данных
```
User Input → AI Generator → Editor → Generator → Platform → Domains
```

### Ключевые интеграции
- **AI ↔ Editor**: ИИ генерирует контент для редактирования
- **Editor ↔ Generator**: Редактор создает JSON для генерации
- **Platform ↔ All**: Платформенные сервисы интегрируются со всеми модулями
- **Domains ↔ Generator**: Домены получают сгенерированные сайты

## 🧪 Тестирование

### Структура тестов
```
__tests__/
├── unit/              # Unit тесты
├── integration/       # Integration тесты
└── e2e/              # E2E тесты
```

### Покрытие тестами
- **AI Generator**: >90% (критически важно)
- **Editor**: >80%
- **Components**: >85%
- **Generator**: >80%
- **Platform**: >75%

## 📊 Мониторинг и метрики

### Ключевые метрики
- **AI Generation Time**: <30 секунд
- **Editor Response**: <50ms
- **Component Load**: <2 секунды
- **JSON Generation**: <1 секунда
- **Platform API**: <100ms

### Логирование
- **Structured Logging**: JSON формат
- **Log Levels**: error, warn, info, debug
- **Context Tracking**: correlation IDs
- **Performance Monitoring**: timing и метрики

## 🚀 Развертывание

### Сборка
```bash
# Development
npm run dev

# Production
npm run build

# Testing
npm run test
```

### Контейнеризация
- **Docker**: для каждого модуля отдельный образ
- **Docker Compose**: для локальной разработки
- **Kubernetes**: для продакшн развертывания

## 📚 Документация

### Модульная документация
Каждый модуль содержит:
- **README.md**: описание назначения и API
- **TODO.md**: план разработки и задачи
- **API.md**: детальная документация API

### Общая документация
- **README.md**: обзор архитектуры
- **DEPLOYMENT.md**: инструкции по развертыванию
- **API_DOCUMENTATION.md**: общая API документация

---

**Situs Service** — архитектурно масштабируемая платформа для создания сайтов при помощи ИИ. 