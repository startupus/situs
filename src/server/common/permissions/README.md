# üîê –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ - –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª–µ–π

```
src/server/common/permissions/
‚îú‚îÄ‚îÄ README.md                           # –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ types/                              # –¢–∏–ø—ã –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
‚îÇ   ‚îú‚îÄ‚îÄ index.ts                        # –≠–∫—Å–ø–æ—Ä—Ç—ã —Ç–∏–ø–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ permissions.types.ts            # –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∏–ø—ã –ø—Ä–∞–≤
‚îÇ   ‚îú‚îÄ‚îÄ roles.types.ts                  # –¢–∏–ø—ã —Ä–æ–ª–µ–π
‚îÇ   ‚îî‚îÄ‚îÄ context.types.ts                # –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ —Ç–∏–ø—ã
‚îú‚îÄ‚îÄ config/                             # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ index.ts                        # –≠–∫—Å–ø–æ—Ä—Ç—ã –∫–æ–Ω—Ñ–∏–≥–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ roles.config.ts                 # –ò–µ—Ä–∞—Ä—Ö–∏—è —Ä–æ–ª–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ permissions.config.ts           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∞–≤
‚îÇ   ‚îî‚îÄ‚îÄ access-levels.config.ts         # –°–∏—Å—Ç–µ–º–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ –¥–æ—Å—Ç—É–ø–∞
‚îú‚îÄ‚îÄ services/                           # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ index.ts                        # –≠–∫—Å–ø–æ—Ä—Ç—ã —Å–µ—Ä–≤–∏—Å–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ permissions.service.ts          # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤
‚îÇ   ‚îú‚îÄ‚îÄ access-levels.service.ts        # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è–º–∏ –¥–æ—Å—Ç—É–ø–∞
‚îÇ   ‚îú‚îÄ‚îÄ role-hierarchy.service.ts       # –†–∞–±–æ—Ç–∞ —Å –∏–µ—Ä–∞—Ä—Ö–∏–µ–π —Ä–æ–ª–µ–π
‚îÇ   ‚îî‚îÄ‚îÄ context-resolver.service.ts     # –†–µ–∑–æ–ª–≤–∏–Ω–≥ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
‚îú‚îÄ‚îÄ decorators/                         # –î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ index.ts                        # –≠–∫—Å–ø–æ—Ä—Ç—ã –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ permission.decorator.ts         # –û—Å–Ω–æ–≤–Ω—ã–µ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã –ø—Ä–∞–≤
‚îÇ   ‚îú‚îÄ‚îÄ role.decorator.ts               # –î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã —Ä–æ–ª–µ–π
‚îÇ   ‚îî‚îÄ‚îÄ context.decorator.ts            # –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã
‚îú‚îÄ‚îÄ guards/                             # Guards
‚îÇ   ‚îú‚îÄ‚îÄ index.ts                        # –≠–∫—Å–ø–æ—Ä—Ç—ã guards
‚îÇ   ‚îú‚îÄ‚îÄ permission.guard.ts             # –û—Å–Ω–æ–≤–Ω–æ–π guard
‚îÇ   ‚îú‚îÄ‚îÄ role.guard.ts                   # Guard —Ä–æ–ª–µ–π
‚îÇ   ‚îî‚îÄ‚îÄ context.guard.ts                # –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π guard
‚îú‚îÄ‚îÄ utils/                              # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ index.ts                        # –≠–∫—Å–ø–æ—Ä—Ç—ã —É—Ç–∏–ª–∏—Ç
‚îÇ   ‚îú‚îÄ‚îÄ permission-checker.util.ts      # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤
‚îÇ   ‚îú‚îÄ‚îÄ role-matcher.util.ts            # –°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–ª–µ–π
‚îÇ   ‚îî‚îÄ‚îÄ context-builder.util.ts         # –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
‚îî‚îÄ‚îÄ permissions.module.ts               # –û—Å–Ω–æ–≤–Ω–æ–π –º–æ–¥—É–ª—å
```

## üéØ –ü—Ä–∏–Ω—Ü–∏–ø—ã –º–æ–¥—É–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### 1. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏**

- **Types** - —Ç–æ–ª—å–∫–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–∏–ø–æ–≤ –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
- **Config** - —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã
- **Services** - –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –∏ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –¥–∞–Ω–Ω—ã–º–∏
- **Decorators** - –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤
- **Guards** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ –∑–∞–ø—Ä–æ—Å–æ–≤
- **Utils** - –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —á–∏—Å—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### 2. **–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤**

- –ú–∞–∫—Å–∏–º—É–º **150 —Å—Ç—Ä–æ–∫** –Ω–∞ —Ñ–∞–π–ª
- –ï—Å–ª–∏ —Ñ–∞–π–ª –±–æ–ª—å—à–µ - —Ä–∞–∑–±–∏–≤–∞–µ–º –Ω–∞ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ —á–∞—Å—Ç–∏
- –ö–∞–∂–¥–∞—è —Ñ—É–Ω–∫—Ü–∏—è - –º–∞–∫—Å–∏–º—É–º **30 —Å—Ç—Ä–æ–∫**
- –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≤—ã–Ω–æ—Å–∏—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã

### 3. **–ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ –∏ —ç–∫—Å–ø–æ—Ä—Ç—ã**

- –ö–∞–∂–¥–∞—è –ø–∞–ø–∫–∞ –∏–º–µ–µ—Ç `index.ts` —Å —ç–∫—Å–ø–æ—Ä—Ç–∞–º–∏
- –§–∞–π–ª—ã –∏–º–µ–Ω—É—é—Ç—Å—è –ø–æ –ø–∞—Ç—Ç–µ—Ä–Ω—É `{name}.{type}.ts`
- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å `I`, —Ç–∏–ø—ã - —Å `T`
- –°–µ—Ä–≤–∏—Å—ã –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—Ç—Å—è –Ω–∞ `.service.ts`

### 4. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**

- –ö–∞–∂–¥—ã–π –º–æ–¥—É–ª—å –∏–º–µ–µ—Ç JSDoc –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
- README.md –≤ –∫–∞–∂–¥–æ–π –æ—Å–Ω–æ–≤–Ω–æ–π –ø–∞–ø–∫–µ
- –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ò–º–ø–æ—Ä—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

```typescript
// –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∏–ø—ã
import { Permission, PermissionContext } from './permissions/types';

// –î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã
import { RequirePermission, AnyPermission } from './permissions/decorators';

// –°–µ—Ä–≤–∏—Å—ã
import { PermissionsService } from './permissions/services';

// Guards
import { PermissionGuard } from './permissions/guards';
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ

```typescript
@Controller('api/projects')
@UseGuards(PermissionGuard)
export class ProjectsController {
  @Get()
  @AnyPermission(['project.view.own', 'project.view.clients'])
  async findAll() {
    // –õ–æ–≥–∏–∫–∞ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞
  }
}
```

## üìã –ß–µ–∫-–ª–∏—Å—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞:

- [ ] –†–∞–∑–º–µ—Ä –Ω–µ –ø—Ä–µ–≤—ã—à–∞–µ—Ç 150 —Å—Ç—Ä–æ–∫
- [ ] –ï—Å—Ç—å JSDoc –¥–ª—è –≤—Å–µ—Ö —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- [ ] –î–æ–±–∞–≤–ª–µ–Ω —ç–∫—Å–ø–æ—Ä—Ç –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π `index.ts`
- [ ] –¢–∏–ø—ã –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã
- [ ] –ï—Å—Ç—å unit —Ç–µ—Å—Ç—ã (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ)

### –ü—Ä–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–µ:

- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–µ–∂–¥—É –º–æ–¥—É–ª—è–º–∏
- [ ] –û–±–Ω–æ–≤–∏—Ç—å —ç–∫—Å–ø–æ—Ä—Ç—ã –≤ `index.ts`
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±—Ä–∞—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –º–æ–¥—É–ª–∏

- `../database/` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Prisma
- `../auth/` - –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `../config/` - –≥–ª–æ–±–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
